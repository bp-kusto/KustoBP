[`🌐 КОНТЕКСТ`](./ProcData/context.md)   [`⚙️ СЦЕНАРІЇ`](./ProcData/scripts.md)  

# Демо процес [<sup>📥 завантажити</sub>](./Sources/P25076j__SampleProcess.zip)

Процес створено для демонтстрації підходу до розробки бізнес-процесів ELMA

![DemoProc_Map](./img/DemoProc_Map.png)

### 🔸 Найменування об'єктів процесу

🔹 Назва <ins>зон відповідальності</ins> на діаграмі процесу починається з їх порядкового номеру у форматі `ZZ`, де ZZ - двоцифровий номер зони процесу (у відповідності до послідовності виконання задач процесу) -- що буде використано для привязки назв задач, скриптів, тощо. Нумерація зон відповідальності процесу проводиться з кроком 10 (`10 • Ініціатор`, `20 • Економіст`, `30 • Директор`)
> Таким чином за необхідності внесення нової зони в процес її буде легко вставити між існуючими зберігши послідовність виконання задач процесу, та не переробляючи назви інших зон, задач та скриптів.

🔹 Назва <ins>задач</ins> на діаграмі процесу починається теж з іх порядкового номеру в форматі `ZZTT` де ZZ - двоцифровий номер зони процесу в якій міститься задача, TT - двоцифровий номер задачі. Частина TT в номері задачі (для наступної задачі в цій же ж зоні), як і в нумерації зон процесу теж зростає на 10 (щоб була можливість вставити нову задачу між існуючими): `[1010] 📥 Підготовка 👤 Ініціатор` (зона 10, задача 10), `[1020] 📥 Усунення зауважень 👤 Ініціатор` (зона 10, задача 20), `[2010] 📥 Заключення 👤 Економіст` (зона 20, задача 10), тощо.
> Номера задач активно використовуються при написанні програмного коду, і дають можливість швидко знайти необхідний, пов'язаний із задачею програмний метод (або зрозуміти що він відсутній):  
> T1010_OnLoad — при завантаженні задачі 1010  
> T1010_OnCh__ProcSubject — при зміні властивості на формі задачі 1010

🔹 Назва <ins>переходів</ins> із задач на діаграмі процесу теж починається з іх порядкового номеру в форматі `RR` де RR - двоцифровий номер переходу, для наступного переходу номер збільшується на 10. 
> Номер задачі, разом із номером переходу використовується для прив'язки форм, скриптів переходів та скриптів після переходу:  
> • До переходу `20 OK` задачі `[1010] 📥 Підготовка 👤 Ініціатор` прив'язана форма `[1010_20] 📥 В роботу 👤 Ініціатор`  
> • Після переходу `20 OK` задачі `[1010] 📥 Підготовка 👤 Ініціатор` виконується скрипт `T1010_A20__Ok` (зона 10; задача 10; перехід A20, після задачі)  
> • Безпосередньо на сам перехід `20 OK` задачі `[1010] 📥 Підготовка 👤 Ініціатор` може бути прив'язано скрипт `T1010_A20__IsAllowed` (зона 10; задача 10; перехід A20, після задачі), що перевіряє дані форми дозволяє цей перехід чи ні.  

### 🔸 Контекст процесу

🔹 <ins>Назва властивостей для користувача</ins> із контексту процесу будь-яка, проте зрозумілоа для кінцевого користувача та розробника;  

🔹 <ins>Назва властивостей для пр'ограмного коду</ins> із контексту процесу перекладена на англійську мову (а не транслітерація назви латинськими літерами), тобто не `NazvaVlastyvostyProcesu`, а `NameOfProcessProperty`

🔹 В контексті процесу не використовуються властивості з наступними типами даних:  
	- `Випадаючий список` — замісь цього типу даних використовуються `переліки (enum)`, які значно легше контролювати в програмному коді  
	- `Текст` — замісь цього типу даних використовується `Строка (String)` з налаштуванням "Несколько строк: вкл""  
	- `Файл` — замісь цього типу даних використовується `Вложение  `


### 🔸 Діаграма процесу

🔹 На діаграмі процесу розміщено <ins>скрипти процесу</ins> в яких можна обробити типові події процесу —  після запуску `Proc_AS` та перед зупинкою `Proc_BS`:  
> `Proc_AS` (process after start) — після запуску процесу  
> `Proc_BS` (process before stop) — перед зупункою процесу  
> `Proc_BeforeAbort` (process before abort) — перед перериванням процесу ззовні (відсутній на діаграмі, але прив'язаний до відповідної події процесу) 

🔹 На діаграмі процесу розміщено <ins>скрипти задач</ins> в яких можна обробити типові події задач - перед задачею `B` (before) та після задачі `A` (after). Додатково із задачею можуть бути пов'язані скрипти під час її виконання чи перед завершенням її виконання.
> Наприклад, для задачі `[1010] 📥 Підготовка 👤 Ініціатор` скрипти  
>  
> ◤ Перед задачею (B, before):  
> `T1010_B10`   
>  
> ◤ Під час виконання:  
> `T1010_OnLoad` — при завантаженні форми задачі  
> `T1010_OnCh__ProcSubject` — при зміні властивості на формі  
> `T1010_OnCh__BL10_PropertyName` (як приклад) — при зміні властивості блока (BL10) на формі  
> `T1010_OnCh__BL10a_PropertyName` (як приклад) — при зміні властивості блока (a), що вкладений в інший блок (BL10) на формі  
>  
> ◤ Перед завершенням виконання :  
> `T1010_A20__IsAllowed` (як приклад) — чи дозволено завершити задачу і виконати перехід (A20)  
>  
> ◤ Після виконання задачі (A, after):  
> `T1010_A00__Break` — Після виконання переходу A00 (відмінено користувачем)   
> `T1010_A01__Abort`  — Після виконання переходу A01 (ескалація по таймеру)  
> `T1010_A10__Save` — Після виконання переходу A10 (оновлення документу процесу і продовження роботи)  
> `T1010_A20__Ok` — Після виконання переходу A20 (підготовка даних для наступного користувача)

### 🔸 Скрипти процесу

🔹 Код в скриптах процесу розділено по класам у відповідності до функцій, що він виконує:
```cs
namespace EleWise.ELMA.Model.Scripts {
    // Контекст процесу (методи до яких прив'язані обробники вказані на діаграмі процесу)
    public partial class P25076j_SampleProcess_Scripts: EleWise.ELMA.Workflow.Scripts.ProcessScriptBase<Context>  { /*...*/ }
    
    // Константи, що використовуються процесом
    public static class Constants  { /*...*/ }
    
    // Методи розширення для типових операції процесу
    public static class Context__Ext  { /*...*/ }
    
    // Робота з об'єктом конфігурації процесу
    public static class Config__Ext { /*...*/ }
    
    // DTO що містить стартові параметри процесу (Наша компанія, ЦФВ, Департамент, тощо)
    public class ProcessStartInfo: IProcessStartInfo  { /*...*/ }
    
    // Розширення для роботи з сутностями під час генерації документу процесу
    public static class Entity__Ext { /*...*/ }
    
    // Розширення для роботи з статусами процесу
    public static class EProcStatus__Ext { /*...*/ }
    
    // Розширення для роботи із генерацією документу процесу
    public static class ProcDoc__Ext { /*...*/ }

    // DTO що містить дані які використовуються під час генерації документу процесу
    public class StrViewProcDoc { /*...*/ }

    // DTO що містить дані які використовуються під час генерації документу процесу
    public class StrViewProcMbr { /*...*/ }
}
```

🔹 Код основного класу процесу розділено на блоки, у відповідності до зон процесу та задач, що містяться в них:
```cs
public partial class P25076j_SampleProcess_Scripts: EleWise.ELMA.Workflow.Scripts.ProcessScriptBase<Context> {
    // Обробники типових операцій процесу
    // ▬▬▬▬▬ Proc ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
    public virtual void Proc_AS(Context context) { /*...*/ }

    public virtual void Proc_BS(Context context)  { /*...*/ }

    public virtual void Proc_BeforeAbort(Context context)  { /*...*/ }

    // Обробники форми запуску процесу (що прив'язана до події "Запуск процесу")
    // ▬▬▬▬▬ T0000 ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
    public virtual void T0000_OnLoad(Context context, EleWise.ELMA.Model.Views.FormViewBuilder<Context> form)  { /*...*/ }

    public virtual void T0000_OnCh__CFR(Context context, EleWise.ELMA.Model.Views.FormViewBuilder<Context> form)  { /*...*/ }

    // Обробники що пов'язані із задачею "[1010] 📥 Підготовка 👤 Ініціатор"
    // ▬▬▬▬▬ T1010 ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
    public virtual void T1010_B10(Context context)  { /*...*/ }

    public virtual void T1010_OnLoad(Context context, EleWise.ELMA.Model.Views.FormViewBuilder<Context> form)  { /*...*/ }

    public virtual void T1010_OnCh__ProcSubject(Context context, EleWise.ELMA.Model.Views.FormViewBuilder<Context> form)  { /*...*/ }

    public virtual void T1010_A00__Break(Context context) { /*...*/ }

    public virtual void T1010_A01__Abort(Context context) { /*...*/ }

    public virtual void T1010_A10__Save(Context context) { /*...*/ }

    public virtual void T1010_A20__Ok(Context context) { /*...*/ }

    // Обробники що пов'язані із формою для переходу "[1010_20] 📥 В роботу 👤 Ініціатор" (перехід 20 із задачі 1010)
    // ▬▬▬▬▬ T1010_20 ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
    public virtual void T1010_20_OnLoad(Context context, EleWise.ELMA.Model.Views.FormViewBuilder<Context> form) { /*...*/ }

    // ▬▬▬▬▬ T1020 ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
    public virtual void T1020_B10(Context context) { /*...*/ }

    public virtual void T1020_OnLoad(Context context, EleWise.ELMA.Model.Views.FormViewBuilder<Context> form) { /*...*/ }

    public virtual void T1020_A00__Break(Context context) { /*...*/ }

    public virtual void T1020_A10__Save(Context context)  { /*...*/ }

    public virtual void T1020_A20__Ok(Context context)  { /*...*/ }

    // Обробники що пов'язані із задачею "[2010] 📥 Заключення 👤 Економіст"
    // ▬▬▬▬▬ T2010 ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
    public virtual void T2010_B10(Context context)  { /*...*/ }

    public virtual void T2010_OnLoad(Context context, EleWise.ELMA.Model.Views.FormViewBuilder<Context> form)  { /*...*/ }

    public virtual void T2010_A10__Return(Context context)  { /*...*/ }

    public virtual void T2010_A20__Ok(Context context)  { /*...*/ }.UnderReviewByChief, null);
    }

    // Обробники що пов'язані із задачею "[3010] 📥 Розгляд 👤 Керівник"
    // ▬▬▬▬▬ T3010 ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
    public virtual void T3010_B10(Context context)  { /*...*/ }

    public virtual void T3010_OnLoad(Context context, EleWise.ELMA.Model.Views.FormViewBuilder<Context> form)  { /*...*/ }

    public virtual void T3010_A10__No(Context context)  { /*...*/ }

    public virtual void T3010_A20__Ok(Context context) { /*...*/ }
}
```